<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Features Flowchart (Detailed)</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true
            }
        });
    </script>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f9f9f9; }
        h1 { color: #333; text-align: center; }
        .mermaid { 
            background: white; 
            padding: 20px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>App Features Flowchart (Detailed)</h1>
    <div class="mermaid">
graph TD
    subgraph App_Arch ["App Architecture"]
        direction TB
        CleanArch["Clean Architecture"]
        FeatureFirst["Feature-First Design"]
        ReadOnly["Read-Only Domain Model"]
        ErrorHandling["Result/Failure Error Handling"]
    end

    subgraph Features_Layer ["Features Layer"]
        direction TB
        
        %% Home Feature
        subgraph Home_Feature ["Home Feature"]
            Home_Purpose["Landing & Orchestration"]
            Home_Resp["Show Featured Content"]
            Home_Nav["Route to Deeper Features"]
        end

        %% Projects Feature
        subgraph Projects_Feature ["Projects Feature"]
            Projects_Purpose["Showcase Work"]
            
            subgraph Project_Methods ["Public Methods"]
                getProjects["getProjects"]
                getProjectDetail["getProjectDetail"]
                ext_openSource["openProjectSource"]
                ext_download["downloadProjectArtifact"]
                ext_store["openProjectStore"]
            end
            
            subgraph Project_Data ["Data Strategy"]
                Project_JSON["Local JSON Assets"]
                Project_Rank["Ranked Sorting: Hero &gt; Showcase &gt; Standard"]
            end
        end

        %% Articles Feature
        subgraph Articles_Feature ["Articles Feature"]
            Articles_Purpose["Knowledge Base"]
            
            subgraph Article_Methods ["Public Methods"]
                getArticles["getArticles"]
                getArticleDetail["getArticleDetail"]
            end
            
            subgraph Article_Data ["Data Strategy"]
                Article_Registry["Registry: articles.json"]
                Article_Content["Content: Markdown Files"]
                Article_Rank["Ranked Sorting: Hero &gt; Standard"]
            end
        end

        %% System Feature
        subgraph System_Feature ["System Feature"]
            System_Purpose["Platform Abstraction"]
            subgraph System_Caps ["Capabilities"]
                Sys_OpenUrl["Open External URL"]
                Sys_Download["Trigger Download"]
                Sys_Email["Trigger Email"]
                Sys_Net["Check Network"]
            end
        end
    end

    %% Architecture to Features
    App_Arch -.-> Features_Layer
    
    %% Home Interactions
    Home_Nav -->|Routes to| Projects_Feature
    Home_Nav -->|Routes to| Articles_Feature
    
    %% Project Interactions
    getProjects -->|Reads| Project_JSON
    getProjectDetail -->|Reads| Project_JSON
    getProjects -->|Applies| Project_Rank
    
    %% Project External Actions (Delegation to System)
    ext_openSource -->|Uses| Sys_OpenUrl
    ext_download -->|Uses| Sys_Download
    ext_store -->|Uses| Sys_OpenUrl
    
    %% Article Interactions
    getArticles -->|Reads| Article_Registry
    getArticles -->|Applies| Article_Rank
    getArticleDetail -->|Reads| Article_Registry
    getArticleDetail -->|Hydrates Content| Article_Content
    
    %% Cross-Feature Rules (Notes)
    Rule_Indep["Rule: Independent Logic"]
    Rule_NavID["Rule: Nav via ID only"]
    
    Features_Layer -.-> Rule_Indep
    Features_Layer -.-> Rule_NavID
    </div>
</body>
</html>